<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" />
    <meta name="theme-color" content="#2f7f64" />
    <title>Chess Mini App</title>
    <link rel="stylesheet" href="/styles.css" />
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
  </head>
  <body>
    <div id="notice" class="notice hidden"></div>

    <section id="authScreen" class="screen card">
      <h1>Chess Mini App</h1>
      <p class="muted">–û–Ω–ª–∞–π–Ω-—à–∞—Ö–º–∞—Ç—ã 1v1 –¥–ª—è Telegram</p>

      <div id="authStatus" class="status-line">–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è...</div>

      <div id="devAuthBlock" class="dev-auth hidden">
        <label for="devName">–ò–º—è –∏–≥—Ä–æ–∫–∞</label>
        <input id="devName" type="text" maxlength="48" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä, Egor" />
        <button id="devLoginBtn" class="primary">–í–æ–π—Ç–∏ (dev)</button>
      </div>
    </section>

    <section id="appScreen" class="screen hidden">
      <header class="app-header card">
        <div class="header-left">
          <span class="header-icon" aria-hidden="true">‚ôî</span>
          <div>
            <div class="title header-title">–®–∞—Ö–º–∞—Ç—ã</div>
            <div id="whoami" class="whoami-line"></div>
          </div>
        </div>
        <div class="header-actions">
          <button type="button" id="themeToggle" class="icon-btn" title="–°–º–µ–Ω–∏—Ç—å —Ç–µ–º—É" aria-label="–¢–µ–º–∞">üåì</button>
          <div id="connectionBadge" class="badge">offline</div>
        </div>
      </header>

      <nav class="nav card" role="tablist">
        <button class="tab active" data-view="lobby" type="button">–õ–æ–±–±–∏</button>
        <button class="tab" data-view="game" type="button">–ò–≥—Ä–∞</button>
        <button class="tab" data-view="profile" type="button">–ü—Ä–æ—Ñ–∏–ª—å</button>
        <button class="tab" data-view="leaders" type="button">–†–µ–π—Ç–∏–Ω–≥</button>
        <button class="tab" data-view="history" type="button">–ò—Å—Ç–æ—Ä–∏—è</button>
      </nav>

      <main>
        <section id="view-lobby" class="view card">
          <h2>–õ–æ–±–±–∏</h2>
          <div class="actions-row">
            <button id="joinQueueBtn" class="primary">–ù–∞–π—Ç–∏ –∏–≥—Ä—É</button>
            <button id="leaveQueueBtn" class="ghost">–í—ã–π—Ç–∏ –∏–∑ –æ—á–µ—Ä–µ–¥–∏</button>
          </div>

          <h3>–û–∂–∏–¥–∞—é—â–∏–µ –∏–≥—Ä–æ–∫–∏</h3>
          <div id="waitingList" class="list"></div>

          <h3>–í—Ö–æ–¥—è—â–∏–µ –≤—ã–∑–æ–≤—ã</h3>
          <div id="incomingChallenges" class="list"></div>

          <h3 class="lobby-rating-title">–†–µ–π—Ç–∏–Ω–≥</h3>
          <div id="lobbyLeaders" class="lobby-leaders"></div>
        </section>

        <section id="view-game" class="view card hidden">
          <h2>–ü–∞—Ä—Ç–∏—è</h2>
          <div id="gameMeta" class="game-meta">–ù–µ—Ç –∞–∫—Ç–∏–≤–Ω–æ–π –ø–∞—Ä—Ç–∏–∏</div>

          <div id="drawOfferBlock" class="draw-offer-banner hidden">
            <span>–°–æ–ø–µ—Ä–Ω–∏–∫ –ø—Ä–µ–¥–ª–æ–∂–∏–ª –Ω–∏—á—å—é</span>
            <div class="actions-row">
              <button id="drawAcceptBtn" class="primary">–ü—Ä–∏–Ω—è—Ç—å</button>
              <button id="drawDeclineBtn" class="ghost">–û—Ç–∫–ª–æ–Ω–∏—Ç—å</button>
            </div>
          </div>

          <div id="gamePlayersStrip" class="game-players-strip hidden">
            <div class="player-slot" id="playerWhiteSlot">
              <div class="player-avatar" id="playerWhiteAvatar"></div>
              <div class="player-name" id="playerWhiteName"></div>
              <div class="player-side">–ë–µ–ª—ã–µ</div>
            </div>
            <div class="player-turn-badge" id="playerTurnBadge"></div>
            <div class="player-slot" id="playerBlackSlot">
              <div class="player-avatar" id="playerBlackAvatar"></div>
              <div class="player-name" id="playerBlackName"></div>
              <div class="player-side">–ß–µ—Ä–Ω—ã–µ</div>
            </div>
          </div>

          <div id="board" class="board"></div>

          <div class="actions-row">
            <button id="offerDrawBtn" class="ghost">–ü—Ä–µ–¥–ª–æ–∂–∏—Ç—å –Ω–∏—á—å—é</button>
            <button id="resignBtn" class="danger">–°–¥–∞—Ç—å—Å—è</button>
            <button id="rematchBtn" class="primary">–†–µ–≤–∞–Ω—à</button>
          </div>

          <h3>–•–æ–¥—ã</h3>
          <div id="moveList" class="moves"></div>
        </section>

        <section id="view-profile" class="view card hidden">
          <h2>–ü—Ä–æ—Ñ–∏–ª—å</h2>
          <div id="profileStats" class="stats-grid"></div>
        </section>

        <section id="view-leaders" class="view card hidden">
          <h2>–†–µ–π—Ç–∏–Ω–≥</h2>
          <div class="actions-row">
            <button id="loadGlobalBtn" class="ghost">–û–±—â–∏–π</button>
            <button id="loadDailyBtn" class="ghost">–°—É—Ç–æ—á–Ω—ã–π</button>
          </div>
          <div id="leadersInfo" class="muted"></div>
          <div id="leadersTable" class="table-wrap"></div>
        </section>

        <section id="view-history" class="view card hidden">
          <h2>–ò—Å—Ç–æ—Ä–∏—è –ø–∞—Ä—Ç–∏–π</h2>
          <div id="historyList" class="list"></div>
        </section>
      </main>
    </section>

    <script src="/socket.io/socket.io.js"></script>
    <script src="/app.js"></script>
  </body>
</html>
